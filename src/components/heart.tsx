import { useState } from "react";

const SERVER = "https://s2dlab.click:443/data/stat/heart-shake";

export default function Heart() {
  const [clicked, setClicked] = useState(false)
  const [disabled, setDisabled] = useState(false)
  const emptyHeart = <svg fill="#ffffff" height="54px" width="54px" version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlnsXlink="http://www.w3.org/1999/xlink" viewBox="0 0 471.701 471.701" xmlSpace="preserve" stroke="#ffffff" strokeWidth="0.004717010000000001" transform="rotate(0)"><g id="SVGRepo_bgCarrier" strokeWidth="0"></g><g id="SVGRepo_tracerCarrier" strokeLinecap="round" strokeLinejoin="round" stroke="#CCCCCC" strokeWidth="3.7736080000000003"></g><g id="SVGRepo_iconCarrier"> <g> <path d="M433.601,67.001c-24.7-24.7-57.4-38.2-92.3-38.2s-67.7,13.6-92.4,38.3l-12.9,12.9l-13.1-13.1 c-24.7-24.7-57.6-38.4-92.5-38.4c-34.8,0-67.6,13.6-92.2,38.2c-24.7,24.7-38.3,57.5-38.2,92.4c0,34.9,13.7,67.6,38.4,92.3 l187.8,187.8c2.6,2.6,6.1,4,9.5,4c3.4,0,6.9-1.3,9.5-3.9l188.2-187.5c24.7-24.7,38.3-57.5,38.3-92.4 C471.801,124.501,458.301,91.701,433.601,67.001z M414.401,232.701l-178.7,178l-178.3-178.3c-19.6-19.6-30.4-45.6-30.4-73.3 s10.7-53.7,30.3-73.2c19.5-19.5,45.5-30.3,73.1-30.3c27.7,0,53.8,10.8,73.4,30.4l22.6,22.6c5.3,5.3,13.8,5.3,19.1,0l22.4-22.4 c19.6-19.6,45.7-30.4,73.3-30.4c27.6,0,53.6,10.8,73.2,30.3c19.6,19.6,30.3,45.6,30.3,73.3 C444.801,187.101,434.001,213.101,414.401,232.701z"></path> </g> </g></svg>
  const filledHeart = <svg fill="#ffffff" height="64px" width="64px" version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlnsXlink="http://www.w3.org/1999/xlink" viewBox="-47.17 -47.17 566.04 566.04" xmlSpace="preserve" stroke="#ffffff" strokeWidth="0.004717010000000001" transform="rotate(0)"><g id="SVGRepo_bgCarrier" strokeWidth="0"><path transform="translate(-47.17, -47.17), scale(17.68875)" d="M16,26.026761930849815C17.3617052365258,25.720306824447437,18.79146381725058,25.69114618791422,20.019030431673645,25.02689014497914C21.2143647558833,24.380075512799568,21.977735348881822,23.206752865294852,22.95568637101507,22.262928139329333C23.994984140527023,21.259897404347857,25.0654052343508,20.34822310670651,26.004212169305802,19.250565579100385C27.28621031809737,17.75164725414614,28.893218795898328,16.445422393342227,29.528373950611332,14.5781106015329C30.241027368772546,12.48295932812954,31.521541576883756,9.439037736209338,29.824823792266223,8.018234262035957C27.740817088840238,6.273121438163661,24.424181315293836,8.609596760701743,21.759565307016313,8.072638441649746C20.340161300482258,7.786608189246932,19.372580854563093,6.516738048813401,18.194730712853417,5.674603806112724C16.413224147144213,4.400869882370834,15.170214059906776,1.7421515645137065,12.980863589406868,1.7960799381008243C10.973090283662453,1.8455356786820505,10.3284349842647,4.778461048202621,8.668642214831946,5.909251691989102C6.948288776354598,7.081301364732843,4.057641067821984,6.702854672956534,3.0805940343491987,8.540977487961445C2.0904126843311435,10.40380994955885,4.07559946383411,12.628972004219763,3.976661060509981,14.736296155424863C3.8845811451104075,16.697538939248105,1.7331951960006409,18.58161070548383,2.5248321298332588,20.378347451061995C3.349228884120991,22.249437439490112,6.176426394157129,22.136667244460952,7.790342600392766,23.392008724906034C9.097593569476915,24.408818866909012,9.50894616282756,26.531233160787593,11.085868446860943,27.037320180153337C12.695785600663239,27.553996355030918,14.350462498377269,26.39799439512692,16,26.026761930849815" fill="#ff0000" strokeWidth="0"></path></g><g id="SVGRepo_tracerCarrier" strokeLinecap="round" strokeLinejoin="round" stroke="#CCCCCC" strokeWidth="3.7736080000000003"></g><g id="SVGRepo_iconCarrier"> <g> <path d="M433.601,67.001c-24.7-24.7-57.4-38.2-92.3-38.2s-67.7,13.6-92.4,38.3l-12.9,12.9l-13.1-13.1 c-24.7-24.7-57.6-38.4-92.5-38.4c-34.8,0-67.6,13.6-92.2,38.2c-24.7,24.7-38.3,57.5-38.2,92.4c0,34.9,13.7,67.6,38.4,92.3 l187.8,187.8c2.6,2.6,6.1,4,9.5,4c3.4,0,6.9-1.3,9.5-3.9l188.2-187.5c24.7-24.7,38.3-57.5,38.3-92.4 C471.801,124.501,458.301,91.701,433.601,67.001z M414.401,232.701l-178.7,178l-178.3-178.3c-19.6-19.6-30.4-45.6-30.4-73.3 s10.7-53.7,30.3-73.2c19.5-19.5,45.5-30.3,73.1-30.3c27.7,0,53.8,10.8,73.4,30.4l22.6,22.6c5.3,5.3,13.8,5.3,19.1,0l22.4-22.4 c19.6-19.6,45.7-30.4,73.3-30.4c27.6,0,53.6,10.8,73.2,30.3c19.6,19.6,30.3,45.6,30.3,73.3 C444.801,187.101,434.001,213.101,414.401,232.701z"></path> </g> </g></svg>
  
  const clickHeart = () => {
    const statType = clicked ? { type: 'decrement'} : { type: 'increment'}

    setClicked(!clicked)
    setDisabled(true)
    setTimeout(() => {
      setDisabled(false)
    }, 1000)
    
    fetch(SERVER, {
      method: "POST",
      headers: {
        "Content-Type": "application/json",
      },
      body: JSON.stringify(statType),
    }).then(() => {
      console.log('Data sent successfully')
    }).catch((error) => {
      console.error(error);
    });
  }

  return (
    <div id="heart" onClick={clickHeart} style={{pointerEvents: disabled ? "none" : "auto"}}>
      {clicked ? filledHeart : emptyHeart}
    </div>
  )
}
